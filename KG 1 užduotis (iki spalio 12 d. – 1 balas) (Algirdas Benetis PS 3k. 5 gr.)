<!DOCTYPE html>
<html lang="lt">
<head>
    <title>KG 1 uzduotis</title>
<body onload="buttonAction();">
<h1>Algirdas Benetis VU MIF PS 3 k., 5 gr.</h1>
<h2>1 uzduotis (1 balas)</h2>
<br>
<label for="moves">Irasykite pasirinkta zingsniu skaiciu: </label>
<input type="text" id="moves" name="moves">
<button type="button" id="myBtn" onclick="buttonAction()">Generuoti</button>
<br/>
<br/>
<canvas id="canvas" width="500" height="500"></canvas>

</body>


<script type="application/javascript">

    function buttonAction() {

        if(document.getElementById("moves").value!=null)
            draw(document.getElementById("moves").value);
        else
            draw(0);
    }

    function draw(moves) {

        let canvas = document.getElementById('canvas');
        if (canvas.getContext) {
            var ctx = canvas.getContext("2d");
            ctx.clearRect(0, 0, 500, 500);

            ctx.beginPath();
            ctx.moveTo(0,0);
            ctx.lineTo(500,0);
            ctx.lineTo(500,500);
            ctx.lineTo(0,500);
            ctx.closePath();
            ctx.stroke();

            if (moves != null) {
                var first = true;
                if(moves == 0)
                    draw0();
                else
                    create(moves);
            }
        }

        function create(moves, colour) {
            let firstMove;
            if (moves > 0) {
                moves = moves - 1;
                if (first) {
                    firstMove = moves;
                    first = false;
                }
                ctx.save();
                ctx.save();
                ctx.save();
                ctx.save();
                ctx.transform(0, 0.5, -0.5, 0, 250, 0);
                if (moves === firstMove) {
                    colour = "orange";
                }
                create(moves, colour);
                ctx.restore();

                ctx.transform(-0.5, 0, 0, 0.5, 500, 0);
                if (moves === firstMove) {
                    colour = "red";
                }
                create(moves, colour);
                ctx.restore();

                ctx.transform(0.25, 0, 0, -0.25, 375, 375);
                if (moves === firstMove) {
                    colour = "blue";
                }
                create(moves, colour);
                ctx.restore();
                ctx.transform(0.5, 0, 0, 0.5, 0, 250);
                if (moves === firstMove) {
                    colour = "green";
                }
                create(moves, colour);
                ctx.restore();
            } else draw(colour);
        }

        function draw(colour) {

            ctx.fillStyle = colour;
            ctx.beginPath();
            ctx.moveTo(0,0);
            ctx.lineTo(500,0);
            ctx.lineTo(500,375);
            ctx.lineTo(375,375); //
            ctx.lineTo(375,250);
            ctx.lineTo(250,250);
            ctx.lineTo(250,500);
            ctx.lineTo(0,500);
            ctx.fill();
        }

        function draw0() {
            ctx.fillStyle = "orange";
            ctx.beginPath();
            ctx.moveTo(0,0);
            ctx.lineTo(250,0);
            ctx.lineTo(250,250);
            ctx.lineTo(0,250);
            ctx.lineTo(0,0)
            ctx.fill();
            ctx.closePath()

            ctx.fillStyle = "red";
            ctx.beginPath()
            ctx.moveTo(250, 0)
            ctx.lineTo(500,0);
            ctx.lineTo(500,250);
            ctx.lineTo(250,250);
            ctx.lineTo(250,0);
            ctx.fill();
            ctx.closePath()

            ctx.fillStyle = "blue";
            ctx.beginPath()
            ctx.moveTo(375,250)
            ctx.lineTo(500,250);
            ctx.lineTo(500,375);
            ctx.lineTo(375,375);
            ctx.lineTo(375,250);
            ctx.fill();
            ctx.closePath()

            ctx.fillStyle = "green";
            ctx.beginPath()
            ctx.moveTo(0, 250)
            ctx.lineTo(250,250);
            ctx.lineTo(250,500);
            ctx.lineTo(0,500);
            ctx.lineTo(0,250);
            ctx.fill();
            ctx.closePath()
        }
    }
</script>
</html>
